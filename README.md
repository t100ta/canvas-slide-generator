# Canvas Slide Generator

TypeScript + Vite で Markdown から CRT スタイルの Canvas スライドを生成するツールです。

## 機能

- **Markdown パーサー**: リアルタイムで Markdown コンテンツを解析
- **Canvas 描画**: HTML5 Canvas を使用した高品質な描画
- **CRT 効果**: レトロな CRT 風の視覚効果
  - スキャンライン効果
  - RGB オフセット
  - ノイズ効果
  - ビネット効果
  - グリッチトランジション
- **画像サポート**: ドラッグ&ドロップでの画像追加と base64 変換
- **画像サポート**: ドラッグ&ドロップでの画像追加と base64 変換。画像はスライド内で自動的に中央寄せされ、余白に合わせてサイズ調整されます。
- **アニメーション**: 時間ベースの微細なアニメーション効果
- **ボタンエフェクト**: テーマ色に連動したネオングロウ効果
- **HTML 出力**: スタンドアロン HTML ファイルとしてエクスポート

## 技術仕様

- **解像度**: 1280x720 (16:9)
- **コンテンツエリア**: 960x720 (4:3) 中央配置
- **サイドマージン**: レトロ TV 風のビジュアルバンド
- **フォント**: DotGothic16 (レトロフューチャーなモノスペース)
- **カラーパレット**: グリーン系 CRT スタイル

## 使用方法

### 開発環境での実行

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build

# コンパイルテスト
```

npm test

```

## カバレッジ表示
```

npm run coverage

```

### アプリケーションの使用

1. **Markdownコンテンツの入力**
   - テキストエリアに直接入力
   - Markdownファイルをドラッグ&ドロップ
   - ファイル選択ボタンから選択

2. **画像の追加**
   - 画像ファイルをドラッグ&ドロップ
   - 自動的にbase64変換されMarkdownに挿入
   - スライドでは画像が中央に配置され、残りのスペースに合わせて自動で縮小表示されます

3. **スライド生成**
   - リアルタイムで自動生成（手動更新ボタンなし）

4. **エクスポート**
   - "Export HTML"ボタンでスタンドアロンHTMLファイルをダウンロード
   - 生成されたHTMLファイルは完全に自己完結型

5. **アニメーション制御**
   - "Toggle Animation"ボタンでアニメーションのON/OFF切り替え

## プロジェクト構造

```

canvas-slide-generator/
├── src/
│ ├── main.ts # メインアプリケーション
│ ├── types.ts # TypeScript 型定義
│ ├── utils.ts # ユーティリティ関数
│ ├── markdown.ts # Markdown パーサー
│ ├── canvas.ts # Canvas 描画エンジン
│ ├── effects.ts # CRT 効果とアニメーション
│ ├── ui.ts # UI 管理
│ └── export.ts # HTML 出力機能
├── index.html # メイン HTML ファイル
├── sample.md # サンプル Markdown ファイル
├── vite.config.ts # Vite 設定
├── tsconfig.json # TypeScript 設定
└── package.json # プロジェクト設定

````

## 対応Markdown記法

- **見出し**: `#`, `##`, `###`
- **段落**: 通常のテキスト
- **リスト**: `- item` または `* item`
- **画像**: `![alt](src)` (base64データURL対応)
- **コードブロック**: バッククォート3つで囲む
- **区切り線**: `---`
- **強調**: `*italic*` (イタリック表示)

## CRT効果の詳細

### スキャンライン
- 水平線による走査線効果
- 時間ベースの微細な揺れ

### RGBオフセット
- 赤・緑・青チャンネルの微細なずれ
- レトロなCRT特有の色収差を再現

### ノイズ効果
- ランダムピクセルノイズ
- 時間変化による動的ノイズ

### ジッター
- 微細な画面揺れ
- CRT特有の不安定感を演出

## エクスポート機能

生成されるHTMLファイルの特徴:
- 完全にスタンドアロン（外部依存なし）
- 画像はbase64として埋め込み
- キーボードショートカット対応
- フルスクリーン表示対応
- 情報パネル付き

### キーボードショートカット
- `I`: 情報パネル表示/非表示
- `F`: フルスクリーン切り替え
- `D`: 画像ダウンロード
- `ESC`: パネルを閉じる

## 開発者向け情報

### 型安全性
- 厳密なTypeScript設定
- 全ての関数とオブジェクトに型注釈
- コンパイル時エラーチェック

### モジュール設計
- 機能別モジュール分割
- 明確な責任分離
- 再利用可能なコンポーネント

### パフォーマンス最適化
- Canvas描画の最適化
- デバウンス処理によるリアルタイム更新
- 効率的なアニメーションループ

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 作成者

Canvas Slide Generator - TypeScript + Vite implementation

## GitHub Pages

このリポジトリにはGitHub Pagesで公開するための設定が含まれています。

```bash
# 静的ファイルのビルド (docsディレクトリに出力)
npm run build:pages
````

`.github/workflows/pages.yml` により、`main`ブランチへプッシュすると自動的にビルドが実行され、生成された`docs`ディレクトリの内容が GitHub Pages にデプロイされます。ワークフローでは `actions/upload-pages-artifact@v3` と `actions/deploy-pages@v4` を使用しています。リポジトリ設定で Pages ソースを `GitHub Actions` に変更すれば公開できます。
